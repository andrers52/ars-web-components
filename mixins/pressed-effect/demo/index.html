<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pressed Effect Mixin - Demo</title>

  <!-- Common CSS -->
  <link rel="stylesheet" href="../../../css/base.css">
  <link rel="stylesheet" href="../../../css/components.css">
  <link rel="stylesheet" href="../../../css/buttons.css">

  <style>
    /* Component-specific styles */
    .demo-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin: 10px;
      transition: transform 0.2s ease;
    }

    .demo-button:hover {
      transform: translateY(-2px);
    }

    .demo-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      margin: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .demo-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    }

    .demo-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin: 10px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .demo-icon:hover {
      transform: scale(1.1);
    }

    .effect-counter {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      padding: 10px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 0.9rem;
    }

    .color-palette {
      display: flex;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .color-button {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      border: 2px solid #fff;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .instructions {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
    }

    .instructions h4 {
      color: #1976d2;
      margin-bottom: 10px;
    }

    .code-example {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 0.9rem;
      margin: 10px 0;
      overflow-x: auto;
    }

  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>üéØ Pressed Effect Mixin</h1>
      <p>Add Touch & Mouse Press Animations to Any Element</p>
    </div>

    <div class="content">
      <a href="../../../" class="back-link">‚Üê Back to Demo Page</a>

      <div class="info-box">
        <h4>About Pressed Effect Mixin</h4>
        <p>This mixin adds beautiful press animations to any element. It creates a radial gradient effect that spreads
          from elment's center point,
          providing visual feedback for both touch and mouse interactions. Perfect for buttons, cards, and interactive
          elements.</p>
      </div>

      <!-- Basic Usage -->
      <div class="demo-section">
        <h3>Basic Usage</h3>
        <div class="demo-grid">
          <button class="demo-button"
            style="background-color: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
            Press Me!
          </button>
          <div class="demo-card"
            style="background-color: #f093fb; color: white; padding: 20px; border-radius: 12px; cursor: pointer; text-align: center;">
            <h4>Card Element</h4>
            <p>Click to see pressed effect</p>
          </div>
          <div class="demo-icon"
            style="background-color: #4facfe; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 24px;">
            ‚≠ê
          </div>
        </div>
      </div>

      <!-- Effect Counter -->
      <div class="demo-section">
        <h3>üìä Effect Counter</h3>
        <p>Track how many times the pressed effect has been triggered:</p>

        <div class="effect-counter">
          <strong>Press Count:</strong> <span id="pressCount">0</span>
        </div>

        <div class="controls">
          <button class="btn" onclick="resetCounter()">üîÑ Reset Counter</button>
          <button class="btn-secondary" onclick="logEffectDetails()">üìù Log Details</button>
        </div>
      </div>

      <!-- Color Variations -->
      <div class="demo-section">
        <h3>üé® Color Variations</h3>
        <p>Try different background colors to see how the effect adapts:</p>

        <div class="color-palette">
          <div class="color-button" style="background: #ff6b6b;" onclick="changeColor('#ff6b6b')"></div>
          <div class="color-button" style="background: #4ecdc4;" onclick="changeColor('#4ecdc4')"></div>
          <div class="color-button" style="background: #45b7d1;" onclick="changeColor('#45b7d1')"></div>
          <div class="color-button" style="background: #96ceb4;" onclick="changeColor('#96ceb4')"></div>
          <div class="color-button" style="background: #feca57;" onclick="changeColor('#feca57')"></div>
          <div class="color-button" style="background: #ff9ff3;" onclick="changeColor('#ff9ff3')"></div>
        </div>

        <div class="demo-item">
          <label>Test Element (Click to change color)</label>
          <button id="colorTestButton" class="demo-button" style="background: #667eea;">Change My Color!</button>
        </div>
      </div>

      <!-- Implementation Guide -->
      <div class="demo-section">
        <h3>üìñ Implementation Guide</h3>

        <div class="instructions">
          <h4>How to Use the Pressed Effect Mixin:</h4>
          <p>1. Import the mixin: <code>import PressedEffect from './mixins/pressed-effect/pressed-effect.js'</code></p>
          <p>2. Extend your class: <code>class MyComponent extends PressedEffect(HTMLElement)</code></p>
          <p>3. The effect is automatically applied in the constructor</p>
        </div>

        <div class="code-example">
          // Basic usage with a custom element
          import PressedEffect from './mixins/pressed-effect/pressed-effect.js';

          class MyButton extends PressedEffect(HTMLElement) {
          constructor() {
          super();
          this.innerHTML = 'Click me!';
          this.style.cssText = `
          background: #667eea;
          color: white;
          padding: 15px 30px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          `;
          }
          }

          customElements.define('my-button', MyButton);
        </div>

        <div class="code-example">
          // Usage with existing elements (alternative approach)
          // Create a wrapper component that extends PressedEffect
          class PressableDiv extends PressedEffect(HTMLElement) {
          constructor() {
          super();
          this.innerHTML = '&lt;div&gt;Pressable content&lt;/div&gt;';
          }
          }

          customElements.define('pressable-div', PressableDiv);
        </div>
      </div>

      <!-- Features -->
      <div class="demo-section">
        <h3>‚ú® Features</h3>
        <div class="info-box">
          <h4>What the Pressed Effect Mixin Provides:</h4>
          <ul>
            <li><strong>Touch Support:</strong> Works on mobile devices with touch events</li>
            <li><strong>Mouse Support:</strong> Works on desktop with mouse events</li>
            <li><strong>Radial Animation:</strong> Creates a spreading effect from element's center point</li>
            <li><strong>Automatic Color Detection:</strong> Detects the element's background color</li>
            <li><strong>Customizable Duration:</strong> Configurable animation timing</li>
            <li><strong>Non-Intrusive:</strong> Doesn't interfere with existing event handlers</li>
          </ul>
        </div>
      </div>

      <!-- Advanced Usage -->
      <div class="demo-section">
        <h3>Advanced Usage</h3>
        <div class="demo-grid">
          <button class="demo-button"
            style="background-color: #43e97b; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
            Change My Color!
          </button>
          <div class="demo-card"
            style="background-color: #fa709a; color: white; padding: 20px; border-radius: 12px; cursor: pointer; text-align: center;">
            <h4>Another Card</h4>
            <p>With different color</p>
          </div>
          <div class="demo-icon"
            style="background-color: #a8edea; color: #333; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 24px;">
            üéØ
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Load the mixin -->
  <script type="module">
    import PressedEffect from '../pressed-effect.js';

    // Apply pressed effect to demo elements
    const demoElements = document.querySelectorAll('.demo-button, .demo-card, .demo-icon');

    demoElements.forEach(element => {
      // Add pressed effect methods to the element
      element._getRGBArrayFromBackgroundColor = function (element) {
        const wGCS = window.getComputedStyle;
        const rgbStr = wGCS(element, null).backgroundColor;
        console.log('Element:', element, 'Background color:', rgbStr);
        let [rStr, gStr, bStr] = rgbStr
          .substring(4, rgbStr.length - 1)
          .replace(/ /g, "")
          .split(",");
        return [parseInt(rStr), parseInt(gStr), parseInt(bStr)];
      };

      element._getOriginalButtonColor = function () {
        this.origColorArray = this._getRGBArrayFromBackgroundColor(this);
      };

      element._restoreButtonColor = function () {
        let [r, g, b] = this.origColorArray;
        this.style.backgroundImage = `radial-gradient(rgb(${r},${g},${b}), rgb(${r},${g},${b}))`;
      };

      element._setButtonColorStep = function (percentageCompleted, r, g, b) {
        this.style.backgroundImage = `
            radial-gradient(circle,
              rgb(255, 255, 255, 0.2) ${percentageCompleted}%,
              rgb(${r},${g},${b}) ${100 - percentageCompleted}%
            )
          `;
      };

      element._animate = function (totalTime, numIterations) {
        console.log('Animation triggered for:', element);
        this._getOriginalButtonColor();
        const timeSlice = totalTime / numIterations;
        for (let i = 0; i < numIterations; i++) {
          setTimeout(() => {
            this._setButtonColorStep(
              (100 * i) / numIterations,
              this.origColorArray[0],
              this.origColorArray[1],
              this.origColorArray[2],
            );
          }, timeSlice * i);
        }
        setTimeout(this._restoreButtonColor.bind(this), totalTime);
      };

      // Add event listeners for pressed effect
      let start = () => {
        console.log('Pressed effect triggered for:', element);
        element._animate(500, 100);
        setTimeout(element._restoreButtonColor.bind(element), 500 + 1);
      };

      element.addEventListener("mousedown", start);
      element.addEventListener("touchstart", start);
      element.addEventListener("mouseup", element._restoreButtonColor.bind(element));
      element.addEventListener("touchend", element._restoreButtonColor.bind(element));

      console.log('Event listeners added to:', element);
    });

    // Track press events
    let pressCount = 0;
    const pressCountElement = document.getElementById('pressCount');

    function incrementPressCount() {
      pressCount++;
      pressCountElement.textContent = pressCount;
    }

    // Add click listeners to track presses
    demoElements.forEach(element => {
      if (element) {
        element.addEventListener('click', incrementPressCount);
      }
    });

    // Global functions for demo controls
    window.resetCounter = function () {
      document.getElementById('pressCount').textContent = '0';
      console.log('Press counter reset');
    };

    window.logEffectDetails = function () {
      console.log('Pressed Effect Mixin Details:');
      console.log('- Animation Duration: 500ms');
      console.log('- Animation Steps: 100');
      console.log('- Effect: Radial gradient spreading from press point');
      console.log('- Compatible with: Touch and mouse events');
    };

    window.changeColor = function (color) {
      const button = document.getElementById('colorTestButton');
      if (button) {
        button.style.background = color;
        console.log(`Changed button color to: ${color}`);
      }
    };
  </script>
</body>

</html>
